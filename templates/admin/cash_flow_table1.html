{% include 'admin/company_profile.html' %}

{% block styles %}
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .container {
            padding-left: 180px;
        }
        .pivot-table {
            border-collapse: collapse;
            width: 40%!important;
        }
        .pivot-table th, .pivot-table td {
            padding: 0.75rem;
            text-align: center;
            vertical-align: middle;
        }
        .pivot-table th {
            background-color: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
        }
        .pivot-table td {
            border-bottom: 1px solid #dee2e6;
        }
        .pivot-table thead th {
            background-color: #e9ecef;
        }
        .pivot-table .header-row {
            background-color: #f1f3f5;
        }
        .pivot-table .header-col {
            font-weight: bold;
        }
        .pivot-table .monthly-data {
            font-size: 0.875rem;
        }
        .section-header {
            background-color: #dee2e6;
            font-weight: bold;
        }
        /* Add scroll functionality */
        .table-container {
            max-height: 400px; /* Adjust height as needed */
            overflow-y: auto;
        }
    </style>
{% endblock styles %}

{% block content %}

<div class="container mt-5">

   



    <!-- <div class="row">
        <div class="col-md-4">


            <h6 class="mb-4">Corporate Finance - {% if request.resolver_match.url_name == 'planning_budgeting_cash_flow_table' %} Planning & Budgeting {% elif request.resolver_match.url_name == 'forecasting_cash_flow_table' %} Forecasting {% endif %} - <b>Cash Flow Statement</b></h6>


        </div>
        <div class="col-md-4">
            <div class="d-flex">
                <label for="user_type">Past Statements</label>
                <select class="form-select w-50" id="user_type" name="user_type" required>
                    <option value="">Select</option>
                    {% for year in last_seven_years_labels %}
                    <option value="{{ year }}">{{ year }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="col-md-4 text-center">
            {% if  request.resolver_match.url_name == 'planning_budgeting_cash_flow_table' %}
            <a href="{% url 'cash_flow' company.company_id %}"><i class="fas fa-plus"></i></a>
            {% endif %}
        </div>

    </div> -->

    <div class="row">
        <div class="col-md-4">
            <h6 class="mb-4">
                Corporate Finance -
                {% if request.resolver_match.url_name == 'planning_budgeting_income_statement_table' %}
                Planning & Budgeting
                {% elif request.resolver_match.url_name == 'forecasting_income_statement_table' %}
                Forecasting
                {% endif %}
                - <b>Income Statement</b>
            </h6>
        </div>
        <div class="col-md-4">
        </div>
        <div class="col-md-4">
            <a href="#"><i class="fas fa-plus" data-bs-toggle="modal" data-bs-target="#income_statement"></i></a>
            <!-- The Modal -->
            <div class="modal" id="income_statement">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title"></h4>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <!-- Modal body -->
                        <div class="modal-body text-center">
                            <form method="POST" action="#" enctype="multipart/form-data">
                                {% csrf_token %}
                                <div class="inline">
                                    <div style="margin-right:15px;">
                                        <input type="radio" class="form-check-input" id="monthly"
                                            name="select_type_of_data" value="monthly">
                                        <label class="form-check-label" for="monthly">Monthly</label>
                                    </div>
                                    <div style="margin-right:15px;">
                                        <input type="radio" class="form-check-input" id="quarterly"
                                            name="select_type_of_data" value="quarterly">
                                        <label class="form-check-label" for="quarterly">Quarterly</label>
                                    </div>
                                    <div>
                                        <input type="radio" class="form-check-input" id="yearly"
                                            name="select_type_of_data" value="yearly">
                                        <label class="form-check-label" for="yearly">Yearly</label>
                                    </div>
                                </div>
                                <div id="dropdown-container" class="mt-3"></div>
                                <button type="submit" class="btn btn-primary mt-3">Submit</button>
                            </form>
                        </div>
                        <!-- Modal footer -->
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    <div class="table-container">
        <table class="pivot-table table table-bordered">
            {% for cash_flow in cash_flows %}
            <thead>
                <tr class="header-row">
                    <th class="header-col">Metrics</th>
                    <th class="header-col" colspan="12">{{cash_flow.data_name}}</th>
                </tr>
                <tr>
                    <th class="header-col"></th>
                    <th class="header-col">{{cash_flow.period_label}}</th>
                    <!-- Add more months as needed -->
                </tr>
            </thead>
            <tbody>
                
                <!-- Financing Section -->
                <tr class="section-header">
                    <td colspan="2">Financing</td>
                </tr>
                <tr>
                    <td>Net Financing</td>
                    <td class="monthly-data">{{cash_flow.net_financing}}</td>
                </tr>
                <tr>
                    <td>Finance Inflow Drawing</td>
                    <td class="monthly-data">{{cash_flow.cf_finance_inflow_drawing}}</td>
                </tr>
                <tr>
                    <td>Finance Inflow Distribution</td>
                    <td class="monthly-data">{{cash_flow.cf_finance_inflow_distribution}}</td>
                </tr>
                <tr>
                    <td>Finance Inflow Other</td>
                    <td class="monthly-data">{{cash_flow.cf_finance_inflow_other}}</td>
                </tr>
                <tr>
                    <td>Finance Outflow Loan Payments</td>
                    <td class="monthly-data">{{cash_flow.cf_finance_outflow_loan_payments}}</td>
                </tr>
                <tr>
                    <td>Finance Outflow Other</td>
                    <td class="monthly-data">{{cash_flow.cf_finance_outflow_other}}</td>
                </tr>

                <!-- Investments Section -->
                <tr class="section-header">
                    <td colspan="2">Investments</td>
                </tr>
                <tr>
                    <td>Net Investments</td>
                    <td class="monthly-data">{{cash_flow.net_investments}}</td>
                </tr>
                <tr>
                    <td>Invest Inflow Loans</td>
                    <td class="monthly-data">{{cash_flow.cf_invest_inflow_loans}}</td>
                </tr>
                <tr>
                    <td>Invest Inflow Sell Property</td>
                    <td class="monthly-data">{{cash_flow.cf_invest_inflow_sell_property}}</td>
                </tr>
                <tr>
                    <td>Invest Inflow Sell Equip</td>
                    <td class="monthly-data">{{cash_flow.cf_invest_inflow_sell_equip}}</td>
                </tr>
                <tr>
                    <td>Invest Inflow Other</td>
                    <td class="monthly-data">{{cash_flow.cf_invest_inflow_other}}</td>
                </tr>
                <tr>
                    <td>Invest Outflow Buy Property</td>
                    <td class="monthly-data">{{cash_flow.cf_invest_outflow_buy_property}}</td>
                </tr>
                <tr>
                    <td>Invest Outflow Buy Equip</td>
                    <td class="monthly-data">{{cash_flow.cf_invest_outflow_buy_equip}}</td>
                </tr>
                <tr>
                    <td>Invest Outflow Other</td>
                    <td class="monthly-data">{{cash_flow.cf_invest_outflow_other}}</td>
                </tr>

                <!-- Operations Section -->
                <tr class="section-header">
                    <td colspan="2">Operations</td>
                </tr>
                <tr>
                    <td>Net Operations</td>
                    <td class="monthly-data">{{cash_flow.net_operations}}</td>
                </tr>
                <tr>
                    <td>Ops Inflow Customers</td>
                    <td class="monthly-data">{{cash_flow.cf_ops_inflow_customers}}</td>
                </tr>
                <tr>
                    <td>Ops Inflow Depreciation</td>
                    <td class="monthly-data">{{cash_flow.cf_ops_inflow_depreciation}}</td>
                </tr>
                <tr>
                    <td>Ops Inflow Amortization</td>
                    <td class="monthly-data">{{cash_flow.cf_ops_inflow_amortization}}</td>
                </tr>
                <tr>
                    <td>Ops Inflow Other</td>
                    <td class="monthly-data">{{cash_flow.cf_ops_inflow_other}}</td>
                </tr>
                <tr>
                    <td>Ops Outflow Wages</td>
                    <td class="monthly-data">{{cash_flow.cf_ops_outflow_wages}}</td>
                </tr>
                <tr>
                    <td>Ops Outflow Overhead</td>
                    <td class="monthly-data">{{cash_flow.cf_ops_outflow_overhead}}</td>
                </tr>
                <tr>
                    <td>Ops Outflow Interest</td>
                    <td class="monthly-data">{{cash_flow.cf_ops_outflow_interest}}</td>
                </tr>
                <tr>
                    <td>Ops Outflow Taxes</td>
                    <td class="monthly-data">{{cash_flow.cf_ops_outflow_taxes}}</td>
                </tr>
                <tr>
                    <td>Ops Outflow Accounts Receivable</td>
                    <td class="monthly-data">{{cash_flow.cf_ops_outflow_accounts_receivable}}</td>
                </tr>
                <tr>
                    <td>Ops Outflow Inventory Increase</td>
                    <td class="monthly-data">{{cash_flow.cf_ops_outflow_inventory_increase}}</td>
                </tr>
                <tr>
                    <td>Ops Outflow Other</td>
                    <td class="monthly-data">{{cash_flow.cf_ops_outflow_other}}</td>
                </tr>

                <!-- Final Section -->
                <tr class="section-header">
                    <td colspan="2">Final</td>
                </tr>
                <tr>
                    <td>Beginning Balance</td>
                    <td class="monthly-data">{{cash_flow.cf_beginning_balance}}</td>
                </tr>
                <tr>
                    <td>Change in Cash</td>
                    <td class="monthly-data">{{cash_flow.cf_change_in_cash}}</td>
                </tr>
                <!-- Add more rows as needed -->
            </tbody>
            {% endfor %}

        </table>
    </div>

    {% if  cash_flows and request.resolver_match.url_name == 'forecasting_cash_flow_table' %}
        <button type="button" class="btn btn-secondary" style="position:absolute;right: 400px;top: 400px;">Forecast</button>
    {% endif %}
</div>
<!-- Bootstrap JS (Optional for components like modals or dropdowns) -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

{% endblock content %}

{% include 'admin/company_profile.html' %}

{% block styles %}
<style>
    table {

        font-family: 'Times New Roman', Times, serif;
        border-collapse: collapse;
        table-layout: fixed;
    }

    th,
    td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left !important;

        /* Set width for each cell */
    }

    .container {
        padding-left: 180px;
    }



    th {
        background-color: #f2f2f2;
        position: sticky;
        top: 0;
        z-index: 2;
    }





    /* Ensure the label and dropdowns are inline */
    .dropdown-wrapper {
        display: flex;
        flex-direction: column;
        gap: 10px;
        /* Space between label and dropdown */
    }

    .inline-container {
        display: flex;
        align-items: center;
        /* Center items vertically */
        gap: 10px;
        /* Space between label and dropdown */
        margin: 15px;
    }

    .inline-container label {
        width: 85px;
    }

    .form-select {
        margin-left: 10px;
        /* Space between label and dropdown */
        width: 50%;

    }

    /* Add scroll bar to table */
    .table-container {
        max-height: 500px;
        /* Adjust the height as needed */

        overflow-y: auto;
        overflow-x: auto;
    }
</style>
{% endblock styles %}

{% block content %}
<div class="container  mt-5">
    <div class="row">
        <div class="col-md-4">
            <h6 class="mb-4">
                Corporate Finance -
                {% if request.resolver_match.url_name == 'planning_budgeting_balance_sheet_table' %}
                Planning & Budgeting
                {% elif request.resolver_match.url_name == 'forecasting_balance_sheet_table' %}
                Forecasting
                {% endif %}
                - <b>Income Statement</b>
            </h6>
        </div>
        <div class="col-md-4">
        </div>
        <div class="col-md-4">
            <a href="#"><i class="fas fa-plus" data-bs-toggle="modal" data-bs-target="#balance_sheet"></i></a>
            <!-- The Modal -->
            <div class="modal" id="balance_sheet">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title"></h4>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <!-- Modal body -->
                        <div class="modal-body text-center">
                            <form method="POST" action="#" enctype="multipart/form-data">
                                {% csrf_token %}
                                <div class="inline">
                                    <div style="margin-right:15px;">
                                        <input type="radio" class="form-check-input" id="monthly"
                                            name="select_type_of_data" value="monthly">
                                        <label class="form-check-label" for="monthly">Monthly</label>
                                    </div>
                                    <div style="margin-right:15px;">
                                        <input type="radio" class="form-check-input" id="quarterly"
                                            name="select_type_of_data" value="quarterly">
                                        <label class="form-check-label" for="quarterly">Quarterly</label>
                                    </div>
                                    <div>
                                        <input type="radio" class="form-check-input" id="yearly"
                                            name="select_type_of_data" value="yearly">
                                        <label class="form-check-label" for="yearly">Yearly</label>
                                    </div>
                                </div>
                                <div id="dropdown-container" class="mt-3"></div>
                                <button type="submit" class="btn btn-primary mt-3">Submit</button>
                            </form>
                        </div>
                        <!-- Modal footer -->
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




<div class="container mt-4">

    <form method="POST" action="#" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="table-responsive table-container">
            <table class="table table-bordered table-wrapper">
                <thead>
                    <tr>

                        <th>Breakdown</th>

                        {% for balance_sheet in balance_sheets %}
                        <th class="rowview1">{{balance_sheet.date|date:'d-m-Y'}}
                            ({{balance_sheet.monthly_or_quarterly_or_yearly}})</th>
                        {% endfor %}

                    </tr>
                </thead>
                <tbody>


                    <tr>
                        <td>Total Assets</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.total_assets}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Current Assets</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.current_assets}}
                        </td>
                        {% endfor %}
                    </tr>


                    <tr>
                        <td>Cash,Cash Equivalents and Short Term Investments</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.cash_cash_equivalents_and_short_term_investments}}
                        </td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>Cash and Cash Equivalents</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.cash_and_cash_equivalents}}
                        </td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>Cash</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.cash}}
                        </td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>Cash Equivalents</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.cash_equivalents}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Other Short Term Investments</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.other_short_term_investments}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Receivables</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.receivables}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Accounts Receivable</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.accounts_receivable}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Gross Accounts Receivable</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.gross_accounts_receivable}}
                        </td>
                        {% endfor %}
                    </tr>


                    <tr>
                        <td>Allowance for Doubtful Accounts Receivable</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.allowance_for_doubtful_accounts_receivable}}
                        </td>
                        {% endfor %}
                    </tr>


                    <tr>
                        <td>Other Receivables</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.other_receivables}}
                        </td>
                        {% endfor %}
                    </tr>


                    <tr>
                        <td>Inventory</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.inventory}}
                        </td>
                        {% endfor %}
                    </tr>


                    <tr>
                        <td>Raw Materials</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.raw_materials}}
                        </td>
                        {% endfor %}
                    </tr>


                    <tr>
                        <td>Work in Process</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.work_in_process}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Finished Goods</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.finished_goods}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Hedging Current Assets</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.hedging_current_assets}}
                        </td>
                        {% endfor %}
                    </tr>


                    <tr>
                        <td>Other Current Assets</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.other_current_assets}}
                        </td>
                        {% endfor %}
                    </tr>
                    

                    <tr>
                        <td>Total Non-Current Assets</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.total_non_current_assets}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Net PPE</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.net_ppe}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Gross PPE</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.gross_ppe}}
                        </td>
                        {% endfor %}
                    </tr>
                    

                    <tr>
                        <td>Land and Improvements</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.land_and_improvements}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Buildings and Improvements</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.buildings_and_improvements}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Machinery Furniture Equipment</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.machinery_furniture_equipment}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Other Properties</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.other_properties}}
                        </td>
                        {% endfor %}
                    </tr>
                    

                    <tr>
                        <td>Leases</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.leases}}
                        </td>
                        {% endfor %}
                    </tr>


                    <tr>
                        <td>Accumulated Depreciation</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.accumulated_depreciation}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Goodwill and Other Intangible Assets</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.goodwill_and_other_intangible_assets}}
                        </td>
                        {% endfor %}
                    </tr>


                    <tr>
                        <td>Goodwill</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.goodwill}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Other Intangible Assets</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.other_intangible_assets}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Investments and Advances</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.investments_and_advances}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Long Term Equity Investment</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.long_term_equity_investment}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Other Non-Current Assets</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.other_non_current_assets}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Total Liabilities Net Minority Interest</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.total_liabilities_net_minority_interest}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Current Liabilities</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.current_liabilities}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Payables and Accrued Expenses</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.payables_and_accrued_expenses}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Accounts Payable</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.accounts_payable}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Income Tax Payable</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.income_tax_payable}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Pension_and_other_post_retirement_benefit_plans_current</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.pension_and_other_post_retirement_benefit_plans_current}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Current Debt and Capital Lease Obligation</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.current_debt_and_capital_lease_obligation}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Current Debt</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.current_debt}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Capital Lease Obligation</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.capital_lease_obligation}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Current Deferred Liabilities</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.current_deferred_liabilities}}
                        </td>
                        {% endfor %}
                    </tr>

                    

                    <tr>
                        <td>Current Deferred Revenue</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.current_deferred_revenue}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Other Current Liabilities</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.other_current_liabilities}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Total Non-Current Liabilities Net Minority Interest</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.total_non_current_liabilities_net_minority_interest}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Long Term Debt and Capital Lease Obligation</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.long_term_debt_and_capital_lease_obligation}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Long Term Debt</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.long_term_debt}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>long_term_capital_lease_obligation</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.long_term_capital_lease_obligation}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Non Current Deferred Liabilities</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.non_current_deferred_liabilities}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Non Current Deferred Taxes Liabilities</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.non_current_deferred_taxes_liabilities}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Non Current Deferred Revenue</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.non_current_deferred_revenue}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Trade and Other Payables Non Current</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.trade_and_other_payables_non_current}}
                        </td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>Other Non Current Liabilities</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.other_non_current_liabilities}}
                        </td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>Total Equity Gross Minority Interest</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.total_equity_gross_minority_interest}}
                        </td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>Stockholders Equity</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.stockholders_equity}}
                        </td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>Capital Stock</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.capital_stock}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Common Stock</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.common_stock}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Retained Earnings</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.retained_earnings}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Gains or Losses not Affecting Retained Earnings</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.gains_or_losses_not_affecting_retained_earnings}}
                        </td>
                        {% endfor %}
                    </tr>

                    <tr>
                        <td>Other Equity Adjustments</td>
                        {% for balance_sheet in balance_sheets %}
                        <td>
                            {{balance_sheet.other_equity_adjustments}}
                        </td>
                        {% endfor %}
                    </tr>



                    




                </tbody>
            </table>
        </div>


        <!-- Button to Add More Advisors -->
        <!-- <div class="row mt-5">
            <div class="col-md-12 text-center">
                <button type="button" class="btn btn-primary" id="submit_balance_sheet">Submit</button>
            </div>
        </div> -->

    </form>
</div>





<script>
    // Embed the Python-generated JSON data into JavaScript variables
    const months = JSON.parse('{{ months_json|escapejs }}');
    const quarters = JSON.parse('{{ quarters_json|escapejs }}');
    const years = JSON.parse('{{ years_json|escapejs }}');

    // JavaScript to handle dropdown options based on selected radio button
    const radioButtons = document.querySelectorAll('input[name="select_type_of_data"]');
    const dropdownContainer = document.getElementById('dropdown-container');

    radioButtons.forEach(radio => {
        radio.addEventListener('change', function () {
            dropdownContainer.innerHTML = ''; // Clear the container

            if (this.value === 'yearly') {
                // Create Year Dropdown
                const yearWrapper = document.createElement('div');
                yearWrapper.classList.add('inline-container');

                const yearLabel = document.createElement('label');
                yearLabel.setAttribute('for', 'year-select');
                yearLabel.textContent = 'Select Year:';

                const yearSelect = document.createElement('select');
                yearSelect.name = 'year';
                yearSelect.id = 'year-select';
                yearSelect.classList.add('form-select');
                createOptions(years, yearSelect);

                yearWrapper.appendChild(yearLabel); // Add the year label to the wrapper
                yearWrapper.appendChild(yearSelect); // Add the year dropdown to the wrapper
                dropdownContainer.appendChild(yearWrapper); // Add the year wrapper to the container

            } else {
                // Create Year Dropdown
                const yearWrapper = document.createElement('div');
                yearWrapper.classList.add('inline-container');

                const yearLabel = document.createElement('label');
                yearLabel.setAttribute('for', 'year-select');
                yearLabel.textContent = 'Select Year:';

                const yearSelect = document.createElement('select');
                yearSelect.name = 'year';
                yearSelect.id = 'year-select';
                yearSelect.classList.add('form-select');
                createOptions(years, yearSelect);

                yearWrapper.appendChild(yearLabel); // Add the year label to the wrapper
                yearWrapper.appendChild(yearSelect); // Add the year dropdown to the wrapper
                dropdownContainer.appendChild(yearWrapper); // Add the year wrapper to the container

                // Create Month/Quarter Dropdown
                const mainWrapper = document.createElement('div');
                mainWrapper.classList.add('inline-container');

                const mainLabel = document.createElement('label');
                mainLabel.setAttribute('for', 'main-select');

                const mainSelect = document.createElement('select');

                mainSelect.id = 'main-select';
                mainSelect.classList.add('form-select');

                if (this.value === 'monthly') {
                    mainLabel.textContent = 'Select Month:';
                    mainSelect.name = 'month';
                    createOptions(months, mainSelect);
                } else if (this.value === 'quarterly') {
                    // Convert quarters object to an array of strings in the format "Q1 Jan,Feb,Mar"
                    const quartersArray = Object.entries(quarters).map(([key, value]) => `${key} ${value}`);
                    mainLabel.textContent = 'Select Quarter:';
                    mainSelect.name = 'quarter';

                    createOptions(quartersArray, mainSelect);
                }

                mainWrapper.appendChild(mainLabel); // Add the main label to the wrapper
                mainWrapper.appendChild(mainSelect); // Add the main dropdown to the wrapper
                dropdownContainer.appendChild(mainWrapper); // Add the main wrapper to the container
            }
        });
    });

    function createOptions(options, selectElement) {
        options.forEach(option => {
            const opt = document.createElement('option');
            opt.value = option;
            opt.textContent = option;
            selectElement.appendChild(opt);
        });
    }
</script>
{% endblock content %}